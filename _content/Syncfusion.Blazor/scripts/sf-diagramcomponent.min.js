/*!*  filename: sf-diagramcomponent.min.js 
*     version : 28.1.39 
*     Copyright Syncfusion Inc. 2001 - 2025. All rights reserved. 
*     Use of this code is subject to the terms of our license.
*     A copy of the current license can be obtained at any time by e-mailing 
*     licensing@syncfusion.com. Any infringement will be prosecuted under 
*     applicable laws. 
*/
(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"./bundles/sf-diagramcomponent.js":function(e,t,n){"use strict";n.r(t);n("./modules/sf-diagramcomponent.js")},"./modules/sf-diagramcomponent.js":function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Diagram=function(){"use strict";var e=function(){function e(e,t,n,i){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,n=i=0):(void 0===n&&(n=0),void 0===i&&(i=0)),this.x=e,this.y=t,this.width=n,this.height=i}return e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}(),t=function(e,t){this.width=e,this.height=t};function i(e,t){for(var n=t.split(";"),i=0;i<n.length;i++){var r=n[parseInt(i.toString(),10)].split(":");2===r.length&&(e.style[r[0].trim()]=r[1].trim())}}function r(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++)"style"!==n[parseInt(r.toString(),10)]?e.setAttribute(n[parseInt(r.toString(),10)],t[n[parseInt(r.toString(),10)]]):i(e,t[n[parseInt(r.toString(),10)]])}function o(e,t,n){for(var i=e;i&&!(n?i.id===t:a(i,t));)i=i.parentNode;return i}function a(e,t){return(" "+("object"===n(e.className)?e.className.animVal:e.className)+" ").indexOf(" "+t+" ")>-1}function s(e){var t=e;if(t)for(;null!==t.parentNode;){var n=t.classList;if(-1!==t.id.indexOf("_diagramlayer")||-1!==t.id.indexOf("_htmlLayer_div")||-1!==t.id.indexOf("_diagramPorts_svg")||-1!==t.id.indexOf("_diagramAdornerLayer"))return!0;if(n.contains("e-symbol-draggable"))return!0;t=t.parentNode}return!1}var l,d,c=function(){function e(e,t){var n=this;this.over=function(e){try{for(var t=document.getElementById("clonedNode"),i=void 0,r=n.symbolPaletteInstance.length-1;r>=0;r--)if(e.dragData.draggable.id===n.symbolPaletteInstance[parseInt(r.toString(),10)].id){i=n.symbolPaletteInstance[parseInt(r.toString(),10)].componentInstance;break}if(i&&i.invokeMethodAsync("SymbolPaletteDragEnter",e.target.id.split("_")[0]),t){sf.base.remove(t);var o=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");o[0].style.width="1px",o[0].style.height="1px"}}catch(e){throw console.log("An unexpected error occurred:",e),e}},this.drop=function(e){try{for(var t=void 0,i=n.symbolPaletteInstance.length-1;i>=0;i--)if(e.dragData.draggable.id===n.symbolPaletteInstance[parseInt(i.toString(),10)].id){t=n.symbolPaletteInstance[parseInt(i.toString(),10)].componentInstance;break}var r=o(e.target,"e-diagram");if(r&&e.event.changedTouches&&e.event.changedTouches.length>0){var a=void 0;for(i=n.symbolPaletteInstance.length-1;i>=0;i--){a=n.symbolPaletteInstance[parseInt(i.toString(),10)].componentInstance;break}a&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,a,void 0,e),t&&t.invokeMethodAsync("SymbolPaletteDrop",r.id,!0)}else t&&t.invokeMethodAsync("SymbolPaletteDrop",r.id,!1);sf.base.remove(e.droppedElement)}catch(e){throw console.log("An unexpected error occurred:",e),e}},this.out=function(e){try{for(var t=void 0,i=n.symbolPaletteInstance.length-1;i>=0;i--)if(e.target&&e.target.children[0].id===n.symbolPaletteInstance[parseInt(i.toString(),10)].id||e.target&&e.target.parentNode&&e.target.parentNode.parentNode&&e.target.parentNode.parentNode.parentElement&&e.target.parentNode.parentNode.parentElement.id===n.symbolPaletteInstance[parseInt(i.toString(),10)].id||n.draggable.target&&n.draggable.target.id===n.symbolPaletteInstance[parseInt(i.toString(),10)].id){t=n.symbolPaletteInstance[parseInt(i.toString(),10)].componentInstance;break}t&&(e.evt.changedTouches&&e.evt.changedTouches.length>0&&window.sfBlazor.Diagram.invokeDiagramEvents(e.evt,t,void 0,e),t.invokeMethodAsync("SymbolPaletteDragLeave"))}catch(e){throw console.log("An unexpected error occurred:",e),e}},this.helper=function(e){var t=document.getElementsByClassName("e-control e-accordion")[0],n=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-dragclone",styles:'color:"transparent" height:"auto",  width:'+t.offsetWidth}),i=document.getElementById("previewID");return null===i&&("touchmove"!==e.sender.type||"touchmove"===e.sender.type&&s(e.sender.target))&&(i=e.sender.target),i?(n.setAttribute("id","helperElement"),document.body.appendChild(n),n):null},this.dragStart=function(e){e.bindEvents(e.dragElement)},this.drag=function(e){try{if(o(e.target,"e-diagram")){if(e.event.touches&&e.event.touches.length>0){var t=void 0;for(a=n.symbolPaletteInstance.length-1;a>=0;a--)if(e.element.id===n.symbolPaletteInstance[parseInt(a.toString(),10)].id){t=n.symbolPaletteInstance[parseInt(a.toString(),10)].componentInstance;break}t&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,t,void 0,e)}}else{for(var i=document.getElementById("previewID"),r=void 0,a=n.symbolPaletteInstance.length-1;a>=0;a--)if(e.element.id===n.symbolPaletteInstance[parseInt(a.toString(),10)].id){r=n.symbolPaletteInstance[parseInt(a.toString(),10)].allowDrag;break}if(i){i.style.visibility="";var s=i.cloneNode(!0);s.style.display="Block",s.style.visibility=!0,s.setAttribute("class","e-cloneproperties e-draganddrop e-dragclone"),s.setAttribute("id","clonedNode");var l=document.getElementById("helperElement");l&&l.children[0]&&l.removeChild(l.children[0]),r||(l.style.opacity="0"),l.appendChild(s)}}}catch(e){throw console.log("An unexpected error occurred:",e),e}},this.dragStop=function(e){var t=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");if(t.length>0&&(t[0].style.width="1px",t[0].style.height="1px"),t.length>1)for(var i=t.length-1;i>0;i--)"helperElement"===t[parseInt(i.toString(),10)].id&&t[parseInt(i.toString(),10)].remove();if(!o(e.target,"e-diagram")){var r=document.getElementById("helperElement");r&&r.remove();for(var a=void 0,s=n.symbolPaletteInstance.length-1;s>=0;s--)if(e.element.id===n.symbolPaletteInstance[parseInt(s.toString(),10)].id){a=n.symbolPaletteInstance[parseInt(s.toString(),10)].componentInstance;break}a&&a.invokeMethodAsync("ElementDropToOutSideDiagram")}},this.symbolPaletteInstance=t,e&&this.initializeDrag(e)}return e.prototype.initializeDrag=function(e){var t=e.children[1];this.draggable=new sf.base.Draggable(t,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,preventDefault:!1});for(var n=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),i=0;i<n.length;i++)this.droppable=new sf.base.Droppable(n[parseInt(i.toString(),10)],{accept:".e-dragclone",drop:this.drop,over:this.over,out:this.out});var r=document.getElementsByClassName("e-acrdn-header-content");for(i=0;i<r.length;i++)r[parseInt(i.toString(),10)].style.textDecoration="inherit"},e.prototype.destroy=function(){this.draggable.destroy()},e}(),h=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,s)}l((i=i.apply(e,t||[])).next())}))},g=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},u=!1,p=!1,m=!1,f=!1,v=!1,y=!1,w=!1,b=!1,S=!1,x=!1,I=0,E=!1,B=[],k=!1,A="",C={},P={},D=0,N=0,L={},T=!1,M=!1,_="Arial",W="black",O="Center",H=12,X="None",K="Wrap",Y="WrapWithOverflow",R="CollapseSpace";return{createHtmlElement:function(e,t){try{var n=sf.base.createElement(e);return t&&this.setAttribute(n,t),n}catch(e){throw console.log("An unexpected error occurred:",e),e}},setAttributeSvg:function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++)"style"!==n[parseInt(i.toString(),10)]?e.setAttribute(n[parseInt(i.toString(),10)],t[n[parseInt(i.toString(),10)]]):this.applyStyleAgainstCsp(e,t[n[parseInt(i.toString(),10)]])},applyStyleAgainstCsp:function(e,t){for(var n=t.split(";"),i=0;i<n.length;i++){var r=n[parseInt(i.toString(),10)].split(":");2===r.length&&(e.style[r[0].trim()]=r[1].trim())}},setCanvasSize:function(e,t,n){e&&(e.setAttribute("width",t.toString()),e.setAttribute("height",n.toString()))},getHTMLLayer:function(e){var t=null;window[e+"_htmlLayer"]?t=window[e+"_htmlLayer"]:(t=this.getDiagramElement(e).getElementsByClassName("e-html-layer")[0],window[e+"_htmlLayer"]=t);return t},getDiagramElement:function(e,t){var n;return t&&(n=document.getElementById(t)),"msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name?n?n.querySelector("#"+e):document.getElementById(e):n?n.querySelector("#"+CSS.escape(e)):document.getElementById(e)},createCanvas:function(e,t,n){var i=this.createHtmlElement("canvas",{id:e});return this.setCanvasSize(i,t,n),i},setAttribute:function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++)e.setAttribute(n[parseInt(i.toString(),10)],t[n[parseInt(i.toString(),10)]])},createMeasureElements:function(e,t,n,i,r,o,a,s,l,d,c){try{this.updateZoomPanTool(e),this.updateDrawingTool(t),this.updateInnerLayerSize(n,i,r,void 0,s,l,d,c),o&&a&&this.onAddWireEvents(o,a);if(window.measureElement)window.measureElement.usageCount+=1;else{var h=this.createHtmlElement("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),g=this.createHtmlElement("span",{style:"display:inline-block ; line-height: normal"});h.appendChild(g);var u=this.createHtmlElement("img",{});h.appendChild(u);var p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("xlink","http://www.w3.org/1999/xlink"),h.appendChild(p);var m=document.createElementNS("http://www.w3.org/2000/svg","path");p.appendChild(m);var f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),p.appendChild(f),window.measureElement=h,window.measureElement.usageCount=1,document.body.appendChild(h);window.measureElementCount?window.measureElementCount++:window.measureElementCount=1}}catch(e){throw console.log("An unexpected error occurred:",e),e}},updateZoomPanTool:function(e){w=e},updateDrawingTool:function(e){b=e},updateGridlines:function(e,t,n,i){var r=document.getElementById(e);if(r&&(r.setAttribute("width",t.width.toString()),r.setAttribute("height",t.height.toString()),r.children.length>0))for(var o=0;o<r.children.length;o++)n&&n.length&&o<n.length?r.children[parseInt(o.toString(),10)].setAttribute("d",n[parseInt(o.toString(),10)]):i&&i.length&&o<i.length&&(r.children[parseInt(o.toString(),10)].setAttribute("cx",i[parseInt(o.toString(),10)].x.toString()),r.children[parseInt(o.toString(),10)].setAttribute("cy",i[parseInt(o.toString(),10)].y.toString()))},updatePageBreaks:function(e,t,n,i,r,o,a,s,l,d,c,h){try{var g=document.getElementById(e),u=document.getElementById(t);if(g&&g.children.length>0)for(var p=0;p<g.children.length;p++)g.children[parseInt(p.toString(),10)].setAttribute("x",n),g.children[parseInt(p.toString(),10)].setAttribute("y",i),g.children[parseInt(p.toString(),10)].setAttribute("width",r),g.children[parseInt(p.toString(),10)].setAttribute("height",o);if(u&&u.children.length>0)for(var m=0,f=0;f<u.children.length;f++)if(-1!==u.children[parseInt(f.toString(),10)].id.indexOf("_backgroundLayerrect"))u.children[parseInt(f.toString(),10)].setAttribute("x",n),u.children[parseInt(f.toString(),10)].setAttribute("y",i),u.children[parseInt(f.toString(),10)].setAttribute("width",r),u.children[parseInt(f.toString(),10)].setAttribute("height",o),u.children[parseInt(f.toString(),10)].setAttribute("transform",a);else if(h){var v=s[0+m],y=s[1+m],w=s[2+m],b=s[3+m],S=(v+l)*c,x=(y+d)*c,I=(w+l)*c,E=(b+d)*c;u.children[parseInt(f.toString(),10)].setAttribute("x1",S.toString()),u.children[parseInt(f.toString(),10)].setAttribute("y1",x.toString()),u.children[parseInt(f.toString(),10)].setAttribute("x2",I.toString()),u.children[parseInt(f.toString(),10)].setAttribute("y2",E.toString()),m+=4}}catch(e){throw console.log("An unexpected error occurred:",e),e}},updateInnerLayerSize:function(e,t,n,i,r,o,a,s,l,d,c,h,g,u){try{var p=void 0;d&&(t=(p=this.measureScrollValues(d)).width,n=p.height);var m=void 0;if(null!=e&&null!=t&&null!=n&&e.length>0)for(var f=void 0,v=0;v<e.length-1;v++)if(f=document.getElementById(e[parseInt(v.toString(),10)]),v>=e.length-6){if(-1!==e[parseInt(v.toString(),10)].indexOf("_pattern"))this.updateGridlines(e[parseInt(v.toString(),10)],o,a,s);else if(-1!==e[parseInt(v.toString(),10)].indexOf("gridline")&&r&&f){var w=r.scale,b=-r.tx*w,S=-r.ty*w,x="translate("+r.tx*w+","+r.ty*w+")";f.setAttribute("transform",x),f.children[0].setAttribute("x",b.toString()),f.children[0].setAttribute("y",S.toString())}else if(r&&f){w=r.scale;var I="translate("+r.tx*w+","+r.ty*w+"),scale("+w+")";f.setAttribute("transform",I),m=e[parseInt(v.toString(),10)].split("_")[0];var E=document.getElementById(m+"_diagram_PolygonHelper");E&&E.setAttribute("transform",I);var B=document.getElementById(m+"_diagram_ConnectorHelper");B&&B.setAttribute("transform",I);var k=document.getElementById(m+"_htmlLayer_div"),A="position: absolute; top: 0px; left: 0px; pointer-events: all; transform: translate("+r.tx*w+"px,"+r.ty*w+"px) scale("+w+")";k.setAttribute("style",A);var C=document.getElementById(m+"_diagramUserHandleLayer_div");C&&u&&C.children.length===u.length&&Array.from(C.children).forEach((function(e,t){var n="position: absolute; top: 0px; left: 0px; pointer-events: all; transform: translate("+u[parseInt(t.toString(),10)].x+"px, "+u[parseInt(t.toString(),10)].y+"px)",i=document.getElementById(e.id+"_content_html_template");i&&i.setAttribute("style",n)}));var P=document.getElementById(m+"_diagramFixedUserHandleLayer_div");if(P){var D="position: absolute; top: 0px; left: 0px; pointer-events: all; transform: translate("+r.tx*w+"px,"+r.ty*w+"px) scale("+w+")";P.setAttribute("style",D)}var N=document.getElementById(m+"_SelectorElement");if(l&&N&&N.children.length>0&&N.children.length===l.length){var L=void 0;for(L=0;L<N.children.length;L++)if("line"===N.children[parseInt(L.toString(),10)].tagName){var T=l[parseInt(L.toString(),10)],M=T.startPoint.x+T.x,_=T.startPoint.y+T.y,W=T.endPoint.x+T.x,O=T.endPoint.y+T.y;N.children[parseInt(L.toString(),10)].setAttribute("x1",M.toString()),N.children[parseInt(L.toString(),10)].setAttribute("y1",_.toString()),N.children[parseInt(L.toString(),10)].setAttribute("x2",W.toString()),N.children[parseInt(L.toString(),10)].setAttribute("y2",O.toString()),N.children[parseInt(L.toString(),10)].setAttribute("transform","rotate("+T.angle+" "+(T.x+T.width*T.pivotX)+" "+(T.y+T.height*T.pivotY)+")")}else if("path"===N.children[parseInt(L.toString(),10)].tagName){var H=l[parseInt(L.toString(),10)];N.children[parseInt(L.toString(),10)].setAttribute("transform","rotate("+H.angle+","+(H.x+H.width*H.pivotX)+","+(H.y+H.height*H.pivotY)+")translate("+H.x+","+H.y+")")}else if("rect"===N.children[parseInt(L.toString(),10)].tagName){var X=l[parseInt(L.toString(),10)];N.children[parseInt(L.toString(),10)].setAttribute("x",X.x),N.children[parseInt(L.toString(),10)].setAttribute("y",X.y),N.children[parseInt(L.toString(),10)].setAttribute("width",X.width),N.children[parseInt(L.toString(),10)].setAttribute("height",X.height),N.children[parseInt(L.toString(),10)].setAttribute("transform","rotate("+X.angle+","+(X.x+X.width*X.pivotX)+","+(X.y+X.height*X.pivotY)+")")}else if("image"===N.children[parseInt(L.toString(),10)].tagName){var K=Number(L),Y=N.children[parseInt(K.toString(),10)],R=l[parseInt(K.toString(),10)],z=(b=R.x,S=R.y,R.width),U=R.height,G=R.angle,V=R.pivotX,j=R.pivotY;Y.setAttribute("x",b),Y.setAttribute("y",S),Y.setAttribute("width",z),Y.setAttribute("height",U),Y.setAttribute("transform","rotate("+G+","+(b+z*V)+","+(S+U*j)+")")}else"circle"===N.children[parseInt(L.toString(),10)].tagName&&(N.children[parseInt(L.toString(),10)].setAttribute("cx",l[parseInt(L.toString(),10)].cx),N.children[parseInt(L.toString(),10)].setAttribute("cy",l[parseInt(L.toString(),10)].cy),N.children[parseInt(L.toString(),10)].setAttribute("visibility",l[parseInt(L.toString(),10)].visible?"visible":"hidden"))}}}else f&&(f.style.width=t,f.style.height=n);if(y&&(y=!1),!d&&null!=e&&e.length>0){var F=document.getElementById(e[e.length-1]);p=this.onChangeScrollValues(F,i)}if(null!=c&&void 0!==m){var J=m+"_backgroundImageLayer",q=m+"_backgroundLayer",Z=(b=(r.tx+c.x)*r.scale,S=(r.ty+c.y)*r.scale,c.height*r.scale),Q=c.width*r.scale,$="rotate("+(G=0)+" "+(b+0*Q)+" "+(S+0*Z)+")";this.updatePageBreaks(J,q,b,S,Q,Z,$,h,r.tx,r.ty,r.scale,g)}return p}catch(e){throw console.log("An unexpected error occurred:",e),e}},onChangeScrollValues:function(e,t){return u&&(u=!1),null!=e&&null!=t&&void 0!==t.x&&void 0!==t.y?(p&&(p=!1,m=!0),e.scrollLeft=t.x,e.scrollTop=t.y,this.measureScrollValues(e.id)):null},measureScrollValues:function(t){try{var n=document.getElementById(t);return new e(n.scrollLeft,n.scrollTop,n.scrollWidth,n.scrollHeight)}catch(e){throw console.log("An unexpected error occurred:",e),e}},measurePath:function(t){try{if(t){window.measureElement.style.visibility="visible";var n=window.measureElement.children[2],i=this.getChildNode(n)[0];i.setAttribute("d",t);var r=i.getBBox(),o=new e(r.x,r.y,r.width,r.height);return window.measureElement.style.visibility="hidden",o}return new e(0,0,0,0)}catch(e){throw console.log("An unexpected error occurred:",e),e}},setVerticalRulerLabelAttribute:function(e,t,n){var i=document.getElementsByClassName(e);if(i.length>0)for(var r=0;r<i.length;r++){var o=i[parseInt(r.toString(),10)];if(o instanceof SVGTextElement){var a=o,s=a.getBBox(),l=n?"-"+(s.width+2)+","+(t/2-s.height):"-"+(s.width+2)+","+(t/2-s.height/2);a.setAttribute("x","0"),a.setAttribute("y",s.height.toString()),a.setAttribute("transform","rotate(270) translate("+l+")"),a.setAttribute("fill","black")}}},openUrl:function(e){return h(this,void 0,void 0,(function(){return g(this,(function(t){return window.open(e,"_blank"),[2]}))}))},textEdit:function(e,t,n,i,o,a,s,l){var d=this;try{var c=document.getElementById("diagram_editTextBoxDiv");e.id=l;var h=document.getElementById("diagram_editBox"),g=e.content;if(!c&&!h){c=this.createHtmlElement("div",{}),h=this.createHtmlElement("textarea",{});var u=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),p=-1;if(u.length>0)for(var m=0;m<u.length;m++){var f="#"+u[parseInt(m.toString(),10)].id+"_content";if(u[parseInt(m.toString(),10)].querySelector(f).id.split("_")[0]===n){p=m;break}}if(-1!==p){f="#"+u[parseInt(p.toString(),10)].id+"_content";u[parseInt(p.toString(),10)].querySelector(f).appendChild(c),c.appendChild(h),h.appendChild(document.createTextNode(g)),this.diagram_editTextBoxDiv=c,this.diagram_editBox=h}}var v=e.bounds.width<o.width?e.bounds.width:o.width;v=90>v?90:v;var y=this.measureHtmlText(e.style,t,g,void 0,void 0,v);0===y.width&&0===y.height&&(y.width=50,y.height=12);var w=s?a.scale:1;y.width=Math.max(y.width,50),r(c,{id:"diagram_editTextBoxDiv",style:"position: absolute;left:"+((i.x+a.tx)*a.scale-y.width/2*w-2.5)+"px;top:"+((i.y+a.ty)*a.scale-y.height/2*w-3)+"px;width:"+(y.width+1)*w+"px;height:"+y.height*w+"px; containerName:temp;"});var b=e.style;r(h,{id:"diagram_editBox",style:"width:"+(y.width+1)*w+"px;height:"+y.height*w+"px;line-height: normal;resize: none;outline: none;overflow: hidden;;font-family:"+b.fontFamily+";font-size:"+b.fontSize*w+"px;text-align:"+e.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),h.style.fontWeight=b.bold?"bold":"",h.style.fontStyle=b.italic?"italic":"",h.style.lineHeight=(1.2*b.fontSize+"px;").toString();var S=document.getElementById(e.id+"_text");S&&S.setAttribute("visibility","hidden"),h.style.textDecoration=b.textDecoration?b.textDecoration:"",h.addEventListener("input",(function(n){d.inputChange(n,e,t,o,i,a,s)})),h.select(),window.annotation=e}catch(e){throw console.log("An unexpected error occurred:",e),e}},inputChange:function(e,t,n,i,r,o,a){var s,l,d=this.diagram_editBox,c=this.diagram_editTextBoxDiv,h=d.value,g=h.split("\n");s=(s=Math.min(i.width,t.bounds.width))>90?s:90;var u=this.measureHtmlText(t.style,n,h,void 0,void 0,s),p=Number(d.style.fontSize.split("px")[0]);g.length>1&&""===g[g.length-1]&&(u.height=u.height+p);var m=a?o.scale:1;l=(90>(l=u.width)?90:l)*m;var f=(12>u.height?12:u.height)*m;c.style.left=(r.x+o.tx)*o.scale-l/2-2.5+"px",c.style.top=(r.y+o.ty)*o.scale-f/2-3+"px",c.style.width=l+"px",c.style.height=f+"px",d.style.minHeight="12px",d.style.minWidth="90px",d.style.width=l+"px",d.style.height=f+"px"},measureHtmlText:function(e,t,n,i,r,o){var a={},s=this.createHtmlElement("span",{style:"display:inline-block; line-height: normal"});return e.bold&&(s.style.fontWeight="bold"),e.italic&&(s.style.fontStyle="italic"),null!=i&&(s.style.width=i.toString()+"px"),null!=r&&(s.style.height=r.toString()+"px"),null!=o&&(s.style.maxWidth=o.toString()+"px"),s.style.fontFamily=e.fontFamily,s.style.fontSize=e.fontSize+"px",s.style.color=e.color,s.textContent=n,s.style.whiteSpace=this.whiteSpaceToString(t,e.textWrapping),s.style.wordBreak=null!=o?"break-word":this.wordBreakToString(e.textWrapping),document.body.appendChild(s),a.width=s.offsetWidth,a.height=s.offsetHeight,document.body.removeChild(s),a},getChildNode:function(e){var t,n=[];if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(var i=0;i<e.childNodes.length;i++)1===(t=e.childNodes[parseInt(i.toString(),10)]).nodeType&&n.push(t);else n=e.children;return n},measureBounds:function(e,t,n,i,r){return h(this,void 0,void 0,(function(){var o,a,s,l,d,c,h,u,p,m,f,v,y,w,b,S,x,I,E,B,k,C,N,L,T,M,_,W,O,H;return g(this,(function(g){switch(g.label){case 0:if(g.trys.push([0,3,,4]),o=void 0,a=void 0,null!=i)for(a=document.getElementsByClassName("e-acrdn-panel e-content-hide"),o=[],O=0;O<a.length;O++)o[parseInt(O.toString(),10)]=a[parseInt(O.toString(),10)].style.display,a[parseInt(O.toString(),10)].style.display="block";if(s={},l={},d={},c={},h={},u="measureElement",e)for(M=Object.keys(e).map((function(t){return[e[""+t],t]})),window[""+u].style.visibility="visible",I=window[""+u].children[2],p=this.getChildNode(I)[0],W=0;W<M.length;W++)"Path"===M[parseInt(W.toString(),10)][0]?(v=M[parseInt(W.toString(),10)][1],p.setAttribute("d",v),f=p.getBBox(),T={x:f.x,y:f.y,width:f.width,height:f.height},l[""+v]=T):-1!==M[parseInt(W.toString(),10)][0].indexOf("GetBoundingClientRect")&&((m=document.getElementById(M[parseInt(W.toString(),10)][1]))&&(f=m.getBoundingClientRect(),l[M[parseInt(W.toString(),10)][0]]={x:f.x,y:f.y,width:f.width,height:f.height}),"GetBoundingClientRect"===M[parseInt(W.toString(),10)][0]&&(A=M[parseInt(W.toString(),10)][1],l.GetScrollerBounds=this.measureScrollValues(M[parseInt(W.toString(),10)][1])));if(t)for(M=Object.keys(t).map((function(e){return[t[""+e],e]})),W=0;W<M.length;W++)v=M[parseInt(W.toString(),10)][1],y=t[""+v].content,w=t[""+v].style,b=t[""+v].bounds,S=t[""+v].nodeSize,b.width=null==b.width?void 0:b.width,b.height=null==b.height?void 0:b.height,S.width=null==S.width?void 0:S.width,S.height=null==S.height?void 0:S.height,d[""+v]=this.measureText(b,w,y,b.width||S.width);return n&&(x=Object.keys(n).map((function(e){return[n[""+e],e]}))).length>0?(0,M={},[4,this.loadImage(x,0,M)]):[3,2];case 1:g.sent(),c=M,g.label=2;case 2:if(i&&(M=Object.keys(i).map((function(e){return[i[""+e],e]})),window[""+u].style.visibility="visible",I=window[""+u].children[2],M.length>0)){for(E={},B={},W=0;W<M.length;W++)k=M[parseInt(W.toString(),10)][0],(C=document.getElementById(k))&&((N=C.cloneNode(!0)).id=N.id+"_copy",I.appendChild(N),L=N.getBoundingClientRect(),T=I.getBoundingClientRect(),B={x:L.left-T.left,y:L.top-T.top,width:L.width,height:L.height},E[M[parseInt(W.toString(),10)][1]]=B,I.removeChild(N));h=E}if(l.GetScrollerWidth=this.getScrollerWidth(),s.Path=l,s.Text=d,s.Image=c,s.Native=h,r){for(28500,M=JSON.stringify(s),(s={}).MeasureData="",_=[],W=0;W<M.length;W+=28500)0===W&&M.length<28500?s.MeasureData=M.slice(W,W+28500):(_.push(D),P[D.toString()]=M.slice(W,W+28500),D++);_.length>0&&(s.ChunkMeasureData=[_[0],_[_.length-1]].toString())}if(null!=o)for(O=0;O<a.length;O++)a[parseInt(O.toString(),10)].style.display=o[parseInt(O.toString(),10)].toString();return window[""+u].style.visibility="hidden",[2,s];case 3:throw H=g.sent(),console.log("An unexpected error occurred:",H),H;case 4:return[2]}}))}))},getChunkPathPointsData:function(e){var t=L[parseInt(e.toString(),10)];return delete L[parseInt(e.toString(),10)],t},getChunkMeasureData:function(e){var t=P[parseInt(e.toString(),10)];return delete P[parseInt(e.toString(),10)],t},measureText:function(e,t,n,i,r){var o={},a={width:0,height:0},s=this.getTextOptions(n,e,t,i),l=this.wrapSvgText(s,r,i),d=this.wrapSvgTextAlign(s,l);return a.width=d.width,d.width>=i&&"Wrap"!==s.textOverflow&&(a.width=i),a.height=l.length*s.fontSize*1.2,d.width>s.width&&"Wrap"!==s.textOverflow&&"NoWrap"===s.textWrapping&&(l[0].text=this.overFlow(s.content,s)),o.Bounds=a,o.WrapBounds=d,o.ChildNodes=l,o},getTextOptions:function(e,t,n,i){var r={fill:n.fill,stroke:n.strokeColor,strokeWidth:n.strokeWidth,dashArray:n.strokeDashArray,opacity:n.opacity,gradient:n.gradient,width:i||t.width,height:t.height};return r.fontSize=n.fontSize||H,r.fontFamily=n.fontFamily||_,r.textOverflow=n.textOverflow||K,r.textDecoration=n.textDecoration||X,r.doWrap=n.doWrap,r.whiteSpace=this.whiteSpaceToString(n.whiteSpace||R,n.textWrapping||Y),r.content=e,r.textWrapping=n.textWrapping||Y,r.breakWord=this.wordBreakToString(n.textWrapping||Y),r.textAlign=this.textAlignToString(n.textAlign||O),r.color=n.color||W,r.italic=n.italic||M,r.bold=n.bold||T,r.dashArray="",r.strokeWidth=0,r.fill="",r},whiteSpaceToString:function(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var n="";switch(e){case"CollapseAll":n="nowrap";break;case"CollapseSpace":n="pre-line";break;case"PreserveAll":n="pre-wrap"}return n},wordBreakToString:function(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t},textAlignToString:function(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t},wrapSvgText:function(e,t,n){var i,r,o=[],a=0,s=t||e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(i="",i+=s[0],a=0;a<s.length;a++)if((r=this.bBoxText(i,e))>=e.width&&i.length>0)o[o.length]={text:i,x:0,dy:0,width:r},i="";else{(i+=s[a+1]||"").indexOf("\n")>-1&&(o[o.length]={text:i,x:0,dy:0,width:this.bBoxText(i,e)},i="");var l=this.bBoxText(i,e);Math.ceil(l)+2>=e.width&&i.length>0&&(o[o.length]={text:i,x:0,dy:0,width:l},i=""),a===s.length-1&&i.length>0&&(o[o.length]={text:i,x:0,dy:0,width:l},i="")}else o=this.wordWrapping(e,t,n);else o[o.length]={text:s,x:0,dy:0,width:this.bBoxText(s,e)};return o},wordWrapping:function(e,t,n){var i=[],r="",o=0,a=0,s="nowrap"!==e.whiteSpace,l=t||e.content;if(null!=l){var d=l.split("\n"),c=void 0,h=void 0,g=void 0,u=void 0;for(o=0;o<d.length;o++)for(c="NoWrap"!==e.textWrapping?d[parseInt(o.toString(),10)].split(" "):"NoWrap"===e.textWrapping?[d[parseInt(o.toString(),10)]]:d,a=0;a<c.length;a++){h=(r+=((0!==a||1===c.length)&&s&&r.length>0?" ":"")+c[parseInt(a.toString(),10)])+" "+(c[a+1]||"");var p=this.bBoxText(h,e);Math.floor(p)>(n||e.width)-2&&r.length>0?(i[i.length]={text:r,x:0,dy:0,width:h===r?p:r===u?g:this.bBoxText(r,e)},r=""):a===c.length-1&&(i[i.length]={text:r,x:0,dy:0,width:p},r=""),u=h,g=p}}return i},wrapSvgTextAlign:function(e,t){var n,i,r={x:0,width:0},o=0;for(o=0;o<t.length;o++)i=n=t[parseInt(o.toString(),10)].width,n="left"===e.textAlign?0:"center"===e.textAlign?n>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-n/2:"right"===e.textAlign?-n:t.length>1?0:-n/2,t[parseInt(o.toString(),10)].dy=1.2*e.fontSize,t[parseInt(o.toString(),10)].x=n,r?(r.x=Math.min(r.x,n),r.width=Math.max(r.width,i)):r={x:n,width:i};return r},overFlow:function(e,t){var n,i=0,r=0,o=0,a="";n=e.length;var s=0;do{o>0&&(i=r),r=Math.floor(this.middleElement(i,n)),a+=e.substr(i,r),o=this.bBoxText(a,t)}while(o<=t.width);for(a=a.substr(0,i),s=i;s<n;s++)if(a+=e[parseInt(s.toString(),10)],(o=this.bBoxText(a,t))>=t.width){e=e.substr(0,a.length-1);break}return"Ellipsis"===t.textOverflow?(e=e.substr(0,e.length-3),e+="..."):e=e.substr(0,e.length),e},middleElement:function(e,t){return(e+t)/2},getScrollerWidth:function(){var e=this.createHtmlElement("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(e);var t=e.getBoundingClientRect().width;e.style.overflow="scroll";var n=this.createHtmlElement("div",{style:"width:100%"});e.appendChild(n);var i=n.getBoundingClientRect().width;return e.parentNode.removeChild(e),{x:0,y:0,width:t-i,height:0}},pathPoints:function(e,t){return h(this,void 0,void 0,(function(){var n,i,r,o,a,s;return g(this,(function(l){if(n={},e)for(o=Object.keys(e).map((function(t){return[e[""+t],t]})),s=0;s<o.length;s++)o.length>0&&(i=o[parseInt(s.toString(),10)][1],n[o[parseInt(s.toString(),10)][0]]=this.findSegmentPoints(i));if(t){for((r={}).PathPoints=n,28500,o=JSON.stringify(r),a=[],(r={}).PathPoints="",s=0;s<o.length;s+=28500)0===s&&o.length<28500?r.PathPoints=o.slice(s,s+28500):(a.push(N),L[N.toString()]=o.slice(s,s+28500),N++);return a.length>0&&(r.ChunkPathPoints=[a[0],a[a.length-1]].toString()),[2,r]}return[2,n]}))}))},findSegmentPoints:function(e){var t,n=[],i=0;window.measureElement.style.visibility="visible";var r=window.measureElement.children[2],o=this.getChildNode(r)[0];o.setAttributeNS(null,"d",e);var a=o.getTotalLength();for(i=0;i<=a;i+=10)t=o.getPointAtLength(i),n.push({x:t.x,y:t.y});return window.measureElement.style.visibility="hidden",n},loadImage:function(e,t,n){return h(this,void 0,void 0,(function(){var i,o,a;return g(this,(function(s){switch(s.label){case 0:return i=new Promise((function(n,i){var o={};window.measureElement.style.visibility="visible",window.measureElement.children[1].setAttribute("src",e[parseInt(t.toString(),10)][0]),window.measureElement.style.visibility="hidden";var a=document.createElement("img");a.setAttribute("src",e[parseInt(t.toString(),10)][0]),r(a,{id:"imagesf"+t+"imageNode",style:"display: none;"}),document.body.appendChild(a),a.onload=function(e){var t=e.currentTarget;o={width:t.width,height:t.height},n(o)},a.onerror=function(){n(o={width:0,height:0})}})),o=n,a=e[parseInt(t.toString(),10)][1],[4,i];case 1:return o[a]=s.sent(),t!==e.length-1?[3,2]:[2,n];case 2:return t++,[4,this.loadImage(e,t,n)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))},bBoxText:function(e,t){window.measureElement.style.visibility="visible";var n=window.measureElement.children[2],r=this.getChildNode(n)[1];r.textContent=e,i(r,"font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var o=r.getBBox().width;return window.measureElement.style.visibility="hidden",o},endEdit:function(e){setTimeout((function(){var e=document.getElementById(n.id+"_text");e&&e.setAttribute("visibility","visible")}),100);var t=this.diagram_editBox,n=window.annotation,i=t.value,r=n.style,o=n.bounds,a=n.nodeSize;a.width=null==a.width?void 0:a.width,a.height=null==a.height?void 0:a.height;var s={},l={};return s[n.id]=this.measureText(o,r,i,o.width||a.width),s[n.id].Content=i,l.Text=s,this.diagram_editTextBoxDiv.remove(),l},onAddWireEvents:function(e,t){var n=this;try{var i=document.getElementById(e);C[""+e]=t,i.addEventListener("mousedown",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),n.invokeDiagramEvents(e,t)})),window.addEventListener("resize",(function(e){setTimeout((function(){n.invokeDiagramEvents(e,null,A)}),800)})),i.addEventListener("mousemove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),n.invokeDiagramEvents(e,t)})),i.addEventListener("mouseup",(function(e){n.invokeDiagramEvents(e,t)})),i.addEventListener("mouseleave",(function(e){n.invokeDiagramEvents(e,t)})),i.addEventListener("touchstart",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),n.invokeDiagramEvents(e,t)})),i.addEventListener("touchmove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),n.invokeDiagramEvents(e,t)})),i.addEventListener("touchend",(function(e){n.invokeDiagramEvents(e,t)})),i.addEventListener("scroll",(function(e){n.invokeDiagramEvents(e,t)})),i.addEventListener("mousewheel",(function(e){n.invokeDiagramEvents(e,t)})),i.addEventListener("wheel",(function(e){n.invokeDiagramEvents(e,t)})),i.addEventListener("keydown",(function(e){n.invokeDiagramEvents(e,t)})),i.addEventListener("keyup",(function(e){n.invokeDiagramEvents(e,t)}))}catch(e){throw console.log("An unexpected error occurred:",e),e}},invokeDiagramEvents:function(e,t,n,i){try{var r=void 0,o="diagram_editTextBoxDiv",a=this[""+o],d={};if("resize"===e.type){var c=document.getElementById(n);if(!c){if(document.getElementsByClassName("e-diagram").length>0){var h=document.getElementsByClassName("e-diagram").length;n=document.getElementsByClassName("e-diagram")[h-1].id+"_content",c=document.getElementById(n),A=n}if(!c)return}t=C[""+n]}if("mousedown"!==e.type&&"touchstart"!==e.type||(v=!0,"touchstart"===e.type&&(B=this.getTouches(e),S=s(e.target)&&!w&&!e.target.id.indexOf("_icon"),!function(e){var t=e;if(t)for(;null!==t.parentNode;){var n=t.classList;if(n.contains("e-diagram-userhandle-circle")||n.contains("e-diagram-userhandle-path"))return!0;t=t.parentNode}return!1}(e.target)?(s(e.target)||document.getElementsByClassName("e-diagram-helper").length>0)&&(x=!0,l=setTimeout((function(){!sf.base.Browser.isDevice&&x&&(x=!1)}),300)):e.preventDefault())),"touchmove"===e.type&&l&&clearTimeout(l),("mouseup"===e.type||"touchend"===e.type||"mouseleave"===e.type)&&(v=!1,"touchend"===e.type)){var g=(new Date).getTime()-I;E=g<300&&g>0,I=(new Date).getTime(),l&&clearTimeout(l),e.cancelable&&(x||sf.base.Browser.isDevice&&(s(e.target)||document.getElementsByClassName("e-diagram-helper").length>0))&&e.preventDefault()}if("mouseleave"!==e.type&&"Escape"!==e.key&&("mousedown"!==e.type&&"touchstart"!==e.type||"diagram_editBox"===e.target.id)||!a||(window.isEscape="Escape"===e.key,r=this.endEdit(e,this),this[""+o]=a=document.getElementById("diagram_editTextBoxDiv"),e.currentTarget.focus()),d=this.getMouseEvents(e,n,i),"Escape"===e.key){var b=document.getElementById("helperElement");b&&(sf.base.remove(b),b.remove())}if("mousewheel"!==e.type&&"wheel"!==e.type||!e.ctrlKey){if(!a&&(("mousemove"===e.type||"touchmove"===e.type)&&!u||"mousemove"!==e.type&&"touchmove"!==e.type||!f))if(("mousemove"===e.type||"touchmove"===e.type&&!y)&&v&&!sf.base.Browser.isDevice&&w&&(u=!0,d.isPan=!0),i)t.invokeMethodAsync("InvokeDiagramEvents",d);else if("keydown"===e.type||"keyup"===e.type||"scroll"!==e.type||"scroll"===e.type&&!y)if("mousewheel"===e.type||"wheel"===e.type)if(t.invokeMethodAsync("InvokeDiagramEvents",d,r),e.shiftKey){var k=e.currentTarget.scrollWidth>e.currentTarget.clientWidth,P=0===e.currentTarget.scrollLeft,D=e.currentTarget.scrollLeft===e.currentTarget.scrollWidth-e.currentTarget.clientWidth;P&&e.wheelDelta>0||D&&e.wheelDelta<0||!k||e.preventDefault()}else{var N=e.currentTarget.scrollHeight>e.currentTarget.clientHeight,L=0===e.currentTarget.scrollTop,T=e.currentTarget.scrollTop===e.currentTarget.scrollHeight-e.currentTarget.clientHeight;L&&e.wheelDelta>0||T&&e.wheelDelta<0||!N||e.preventDefault()}else"touchmove"===e.type?(S||(d.type="scroll"),t.invokeMethodAsync("InvokeDiagramEvents",d,r)):"scroll"!==e.type||"scroll"===e.type&&!m?(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&(e.target.id.indexOf("_icon")||B.length>1&&e.touches.length>1||!w||"touchstart"!==e.type&&"touchmove"!==e.type&&"touchend"!==e.type&&"mousedown"!==e.type&&"mousemove"!==e.type&&"mouseup"!==e.type||!w))&&t.invokeMethodAsync("InvokeDiagramEvents",d,r):"scroll"===e.type&&m&&(m=!1)}else p?setTimeout((function(){p=!1,y=!1}),1e3):(p=!0,t.invokeMethodAsync("InvokeDiagramEvents",d,r));"mouseup"!==e.type&&"touchend"!==e.type||!e.currentTarget||!e.currentTarget.id||this[""+o]||this.isForeignObject(e.target)||e.currentTarget.focus(),"mouseup"!==e.type&&"touchend"!==e.type&&"mouseleave"!==e.type||(S=!1,B=[])}catch(e){throw console.log("An unexpected error occurred:",e),e}},isForeignObject:function(e,t){var n=e;if(n)for(;null!==n.parentNode;){if("string"==typeof n.className&&(!t&&-1!==n.className.indexOf("foreign-object")||t&&-1!==n.className.indexOf("e-diagram-text-edit")))return n;n=n.parentNode}return null},getTouches:function(e){var t=[];if(e&&e.touches&&e.touches.length>0)for(var n=0;n<e.touches.length;n++)t.push({pageX:e.touches[parseInt(n.toString(),10)].pageX,pageY:e.touches[parseInt(n.toString(),10)].pageY,screenX:e.touches[parseInt(n.toString(),10)].screenX,screenY:e.touches[parseInt(n.toString(),10)].screenY,clientX:e.touches[parseInt(n.toString(),10)].clientX,clientY:e.touches[parseInt(n.toString(),10)].clientY});return t},getMouseEvents:function(e,t,n){var i={};if(-1!==e.type.indexOf("touch")?((i={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:E?2:1,metaKey:e.metaKey,type:e.type}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(i.clientX=i.offsetX=e.changedTouches[0].clientX,i.clientY=i.offsetY=e.changedTouches[0].clientY),n&&"out"===n.name&&(i.type="mouseleave"),"touchmove"===e.type&&e.cancelable&&(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&(B.length>1&&e.touches.length>1||(b||S||s(e.target))&&!w))&&(S=!0,e.preventDefault())):i={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode,button:e.button},t&&"resize"===e.type){var r=this.measureScrollValues(t),a=document.getElementById(t);i.diagramCanvasScrollBounds=r,i.diagramGetBoundingClientRect=a.getBoundingClientRect()}else if(n){if(n.target.id&&""!==n.target.id){var l=o(n.target,"e-diagram");if(l&&l.id&&""!==l.id){var d=l.id;r=this.measureScrollValues(d);i.diagramCanvasScrollBounds=r,i.diagramGetBoundingClientRect=document.getElementById(d+"_content").getBoundingClientRect()}}}else if(e.currentTarget&&e.currentTarget.id){r=this.measureScrollValues(e.currentTarget.id);i.diagramCanvasScrollBounds=r,i.diagramGetBoundingClientRect=e.currentTarget.getBoundingClientRect()}else if(e.target){r=this.measureScrollValues(e.target.id);i.diagramCanvasScrollBounds=r,i.diagramGetBoundingClientRect=e.target.getBoundingClientRect()}return"mousewheel"!==e.type&&"wheel"!==e.type||(e.ctrlKey&&e.preventDefault(),e.currentTarget.focus(),i.wheelDelta=e.wheelDelta,y=!0),"touchmove"===e.type&&e.touches.length>1&&(y=!0),"mousedown"!==e.type&&"touchstart"!==e.type||(f=!0),"mouseup"!==e.type&&"touchend"!==e.type||(f=!1),t||this.isForeignObject(e.target,!0)||"mousemove"!==e.type&&"mouseleave"!==e.type&&"mouseup"!==e.type&&(this.isForeignObject(e.target)||"mousedown"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type)&&(!this.isForeignObject(e.target)||"mousedown"!==e.type||"keydown"!==e.type||"keyup"!==e.type)||y||e.preventDefault(),i},initialiseModule:function(e,t,n){return h(this,void 0,void 0,(function(){var i,r,o,a=this;return g(this,(function(s){try{"symbolPaletteInstance",window.symbolPaletteInstance?(i={id:e.children[1].id,componentInstance:t,allowDrag:n},window.symbolPaletteInstance.push(i)):(i={id:e.children[1].id,componentInstance:t,allowDrag:n},window.symbolPaletteInstance=[],window.symbolPaletteInstance.push(i)),r=document.getElementById(e.children[1].id+"textEnter"),(o=document.getElementById(e.children[1].id+"iconSearch"))&&o.addEventListener("click",(function(e){a.invokePaletteEvents(e,t)})),r&&r.addEventListener("input",(function(e){a.invokePaletteEvents(e,t)})),r&&r.addEventListener("keyup",(function(e){a.invokePaletteEvents(e,t)})),e.addEventListener("mousedown",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.target.id!==(r&&r.id)&&e.preventDefault(),a.invokePaletteEvents(e,t)})),e.addEventListener("mousemove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),a.invokePaletteEvents(e,t)})),e.addEventListener("mouseup",(function(e){a.invokePaletteEvents(e,t)})),e.addEventListener("mouseleave",(function(e){a.invokePaletteEvents(e,t)})),e.addEventListener("touchstart",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),a.invokePaletteEvents(e,t)})),e.addEventListener("touchmove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),a.invokePaletteEvents(e,t)})),e.addEventListener("touchend",(function(e){a.invokePaletteEvents(e,t)})),setTimeout((function(){this.symbolPaletteDragAndDropModule=new c(e,window.symbolPaletteInstance)}),100)}catch(e){throw console.log("An unexpected error occurred:",e),e}return[2]}))}))},invokePaletteEvents:function(e,t){var n,i,r=window.symbolPaletteInstance,l=null,d=null;"touchstart"!==e.type&&"touchend"!==e.type&&e.target&&o(e.target,"e-acrdn-header")&&e.preventDefault(),"touchstart"===e.type&&(k=s(e.target)),"touchend"===e.type&&(k=!1);var c=this.palettegetMouseEvents(e);if(n=2===e.target.id.split("_").length?e.target.id.split("_")[0]:function(e,t,n){for(var i,r=e;r&&!a(r,n);){if(r.id&&-1!==r.id.indexOf(t)){i=r.id.split(t)[0];break}r=r.parentNode}return i}(e.target,"_Container","e-symbolpalette"),"keyup"===e.type||"click"===e.type||"input"===e.type){for(var h=0;h<(r||[]).length;h++){var g=r[parseInt(h.toString(),10)],p=e.target&&e.target.id&&e.target.id.includes("iconSearch")?"iconSearch":"textEnter";if(e.target&&g.id===e.target.id.split(p)[0]){i=g;break}}if(i&&i.id){var m=i.id;l=document.getElementById(m+"textEnter"),d=document.getElementById(m+"iconSearch")}"input"!==e.type&&"Escape"!==e.key||this.resetSearchIcon(d),"Enter"!==e.key&&"NumpadEnter"!==e.key||!l||""===l.value?"Backspace"!==e.key&&"Delete"!==e.key||!l||""===l.value||this.resetSearchIcon(d):this.toggleSearchIcon(d),"Escape"===e.key&&l&&(l.value=""),l&&(n=l.value)}if("mousemove"===e.type&&!u||"mousemove"!==e.type||!f)if(this.updateSymbolPaletteItemColor(e,"e-symbol-draggable","e-symbol-hover","e-symbol-selected"),"touchmove"===e.type&&n&&k||"touchmove"!==e.type)t.invokeMethodAsync("InvokePaletteEvents",c,n,"keyup"===c.type?d.classList.toString():"");else{var v=document.getElementById("previewID");v&&v.parentNode&&v.parentNode.removeChild(v)}"mousedown"===e.type&&this.updateSymbolPaletteItemColor(e,"e-symbol-draggable","e-symbol-hover","e-symbol-selected")},resetSearchIcon:function(e){e.classList.remove("e-close"),e.classList.add("e-search"),e.title="Start Search"},toggleSearchIcon:function(e){e.classList.contains("e-close")?this.resetSearchIcon(e):e.classList.contains("e-search")&&(e.classList.remove("e-search"),e.classList.add("e-close"),e.title="Clear text")},updateSymbolPaletteItemColor:function(e,t,n,i){if(e&&e.target&&e.type){var r=document.getElementById(e.target.id);if(r)if(Array.from(r.classList).find((function(e){return e===t}))){var o=e.target,a="mousemove"===e.type?n:i;o.classList.add(a);var s=document.getElementsByClassName(a);s&&0!==s.length&&Array.from(s).forEach((function(e){o!==e&&e.classList.remove(a)}))}}},palettegetMouseEvents:function(e){var t={};return-1!==e.type.indexOf("touch")?((t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,type:e.type,key:e.key,keyCode:e.keyCode}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(t.offsetX=e.changedTouches[0].clientX,t.offsetY=e.changedTouches[0].clientY),"touchmove"===e.type&&(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&(k||s(e.target)))&&(k=!0,e.preventDefault())):t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode},t},exportDiagram:function(t,n,i,r,o,a,s,l){return h(this,void 0,void 0,(function(){var d,c,h,u,p,m,f,v=this;return g(this,(function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),d="data",c=t.margin||{},t.region=t&&0===t.region?"PageSettings":1===t.region?"Content":"ClipBounds",t.fileName=a,t.mode=l?"Download":"Data",t.format=0===s?"JPEG":1===s?"PNG":2===s?"SVG":s,t.orientation=t&&0===t.orientation?"Landscape":"Portrait",h=i,u=new e(i.x,i.y,i.width,i.height),(p=t.clipBounds)&&(h.x=p.x?p.x:h.x,h.y=p.y?p.y:h.y,h.width=p.width||h.width,h.height=p.height||h.height),c={top:c.top,bottom:c.bottom,right:c.right,left:c.left},m=t.fileName||"diagram",[4,this.setCanvas(t,h,u,c,m,r,n)];case 1:return d=g.sent(),[2,new Promise((function(e,i){if(null!==d)if(o)e(d);else if("Data"===t.mode&&"SVG"===t.format)e(d);else{var a={id:n+"_ExportImage",src:d};t.margin={top:0,bottom:0,right:0,left:0};var s=v.createHtmlElement("img",a);s.onload=function(){var i=v.getMultipleImage(s,t,n,!0,r);e(JSON.stringify(i))}}}))];case 2:throw f=g.sent(),console.log("An unexpected error occurred:",f),f;case 3:return[2]}}))}))},setCanvas:function(t,n,i,r,o,a,s){return h(this,void 0,void 0,(function(){var l,d,c,h,u;return g(this,(function(g){switch(g.label){case 0:return t.clipBounds=n,d=new e(i.x,i.y,i.width,i.height),"scaleX","scaleY","scaleOffsetX","scaleOffsetY",c=new e(n.x,n.y,n.width,n.height),this.setScaleValueforCanvas(t,n,a),[4,this.exportAsImage({clipBounds:n,margin:r,region:t.region,scaleX:t.scaleX,scaleY:t.scaleY,scaleOffsetX:t.scaleOffsetX,scaleOffsetY:t.scaleOffsetY},o,s,t,d,c,a,"Download"===t.mode)];case 1:return h=g.sent(),"SVG"!==t.format&&(u=l="JPEG"===t.format?h.toDataURL("image/jpeg"):"PNG"===t.format?h.toDataURL("image/png"):"BMP"===t.format?h.toDataURL("image/bmp"):h.toDataURL()),"Data"===t.mode?"SVG"===t.format?[2,h]:[2,l]:(this.canvasMultiplePage(t,h,r,u,o),[2,null])}}))}))},exportAsImage:function(e,t,n,i,r,o,a,s){return h(this,void 0,void 0,(function(){var l;return g(this,(function(d){switch(d.label){case 0:return[4,this.imageExport(e,t,n,i,r,o,a,s)];case 1:return(l=d.sent())instanceof Promise?(l.then((function(e){return e})),[2,l]):[2,l]}}))}))},imageExport:function(e,t,n,i,r,o,a,s){return h(this,void 0,void 0,(function(){var s=this;return g(this,(function(l){return[2,new Promise((function(l,d){var c,h=e.clipBounds,g=e.margin,u=r.x,p=r.y,m=r.width,f=r.height,v=document.createElementNS("http://www.w3.org/2000/svg","svg");c="SVG"===i.format&&"ClipBounds"!==i.region?{x:String(o.x),y:String(o.y),width:String(o.width+g.right),height:String(o.height+g.bottom)}:{x:String(o.x),y:String(o.y),width:String(o.width),height:String(o.height)},"SVG"===i.format&&v.setAttribute("transform","translate("+g.left+", "+g.top+")"),s.setAttributeSvg(v,c),c={x:String(u),y:String(p),width:String(m+g.left+g.right),height:String(f+g.top+g.bottom)};var y,w,b=document.getElementById(n+"_backgroundLayer_svg").cloneNode(!0),S=document.getElementById(n+"_diagramLayer_svg").cloneNode(!0);if(b){for(var x=0;x<b.childNodes.length;x++){if((B=b.childNodes[parseInt(x.toString(),10)]).id===n+"_backgroundImageLayer"&&(w=!0),B.id===n+"_backgroundLayer"){y=B;for(var I=B.childNodes.length-1;I>=0;I--){(E=B.childNodes[parseInt(I.toString(),10)]).id!==n+"_backgroundLayerrect"&&B.removeChild(E)}}}if(y&&b.removeChild(y),"PageSettings"!==i.region&&s.setAttributeSvg(b,c),v.appendChild(b),y){for(I=y.childNodes.length-1;I>=0;I--){var E=y.childNodes[parseInt(I.toString(),10)];w||E.setAttribute("fill","transparent"===a.background.background?"white":a.background.background)}v.appendChild(y)}if("PageSettings"!==i.region){s.setTransform(b,o);for(x=0;x<b.childNodes.length;x++){(B=b.childNodes[parseInt(x.toString(),10)]).id!==n+"_backgroundImageLayer"&&B.id!==n+"_backgroundLayer"||s.setTransform(B,o)}}}v.appendChild(S);for(x=0;x<S.childNodes.length;x++){var B;(B=S.childNodes[parseInt(x.toString(),10)]).id===n+"_diagramlayer"&&s.setTransform(B,o)}var k=window.URL.createObjectURL(new Blob([(new window.XMLSerializer).serializeToString(v)],{type:"image/svg+xml"}));if("SVG"===i.format){var A=void 0;"Data"===i.mode&&"SVG"===i.format&&(A=(new window.XMLSerializer).serializeToString(v),l(A));var C=[],P=(new window.XMLSerializer).serializeToString(v);C.push(P);var D=0,N=void 0;if("Download"===i.mode)for(D=0;D<C.length;D++)N=new Blob([C[parseInt(D.toString(),10)]],{type:"application/octet-stream"}),"msie"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(N,t+".svg"):s.triggerDownload("SVG",t,k)}else{var L=document.createElement("canvas"),T=L.getContext("2d"),M=new Image;M.onload=function(){L.height="Content"===e.region?M.height:h.height,L.width="Content"===e.region?M.width:h.width,a.background.imageSource?T.fillStyle="transparent":T.fillStyle="transparent"===a.background.background?"white":a.background.background,T.fillRect(0,0,L.width,L.height),i.fitToPage?T.drawImage(M,g.left,g.top,L.width-(g.left+g.right),L.height-(g.top+g.bottom)):T.drawImage(M,0,0,L.width,L.height),window.URL.revokeObjectURL(k),l(L)},M.src=k}}))]}))}))},triggerDownload:function(e,t,n){var i=document.createElement("a");i.download=t+"."+e.toLocaleLowerCase(),i.href=n,i.click()},canvasMultiplePage:function(e,t,n,i,r){var o=this,a=[],s=i.substring(i.indexOf(":")+1,i.indexOf(";")),l=s.substring(s.indexOf("/")+1),d=(l="jpeg"===l?void 0:l.toUpperCase())||"JPG";if(e.fitToPage)a=[i],this.exportImage(a,r,d,i);else{if(e.pageHeight=e.pageHeight?e.pageHeight:(void 0).height,e.pageWidth=e.pageWidth?e.pageWidth:(void 0).width,e.pageHeight=e.pageHeight?e.pageHeight:t.width,e.pageWidth=e.pageWidth?e.pageWidth:t.height,n=e.margin||{},e.orientation&&("Landscape"===e.orientation&&e.pageHeight>e.pageWidth||"Portrait"===e.orientation&&e.pageWidth>e.pageHeight)){var c=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=c}e.margin={top:isNaN(n.top)?0:n.top,bottom:isNaN(n.bottom)?0:n.bottom,left:isNaN(n.left)?0:n.left,right:isNaN(n.right)?0:n.right};var h={id:void 0+"_printImage",src:i},g=this.createHtmlElement("img",h);g.onload=function(){a=o.getMultipleImage(g,e,!0),o.exportImage(a,r,d,i)}}},exportImage:function(e,t,n,i){for(var r=[],o=e instanceof HTMLElement?0:e.length,a=0;a<o;a++){for(var s=e[parseInt(a.toString(),10)].replace(/^data:[a-z]*;,/,"").split(","),l=atob(s[1]),d=new ArrayBuffer(l.length),c=new Uint8Array(d),h=0;h<l.length;h++)c[parseInt(h.toString(),10)]=l.charCodeAt(h);r.push(d)}for(var g=0;g<r.length;g++){var u=new Blob([r[parseInt(g.toString(),10)]],{type:"application/octet-stream"});if("msie"===sf.base.Browser.info.name)window.navigator.msSaveOrOpenBlob(u,t+"."+n);else{var p=window.URL.createObjectURL(u),m=document.createElement("a");m.download=t+"."+n.toLocaleLowerCase(),m.href=p,m.click()}}},setScaleValueforCanvas:function(e,t,n){e.scaleX=1,e.scaleY=1,e.scaleOffsetX=0,e.scaleOffsetY=0,e.pageHeight=e.pageHeight||n.height,e.pageWidth=e.pageWidth||n.width;var i=e.orientation||n.orientation;if(i||(i="Portrait"),"Portrait"===i){if(e.pageWidth>e.pageHeight){var r=e.pageHeight;e.pageHeight=e.pageWidth,e.pageWidth=r}}else if(e.pageHeight>e.pageWidth){r=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=r}e.pageWidth&&e.pageHeight&&e.fitToPage&&(e.stretch="Meet");var o=e.pageHeight||t.height,a=e.pageWidth||t.width;"Stretch"!==e.stretch&&"Meet"!==e.stretch&&"Slice"!==e.stretch||(e.scaleX=a/t.width,e.scaleY=o/t.height,"Meet"===e.stretch?(e.scaleX=e.scaleY=Math.min(e.scaleX,e.scaleY),e.scaleOffsetY=(e.pageHeight-t.height*e.scaleX)/2,e.scaleOffsetX=(e.pageWidth-t.width*e.scaleX)/2):"Slice"===e.stretch&&(e.scaleX=e.scaleY=Math.max(e.scaleX,e.scaleY)),t.width=a,t.height=o),t.x*=e.scaleX,t.y*=e.scaleY},setTransform:function(e,t){e.setAttribute("transform","translate("+-t.x+", "+-t.y+")")},getPrintCanvasStyle:function(e,n){var i=0,r=0,o=new t;if(i=e.width,r=e.height,(n.pageHeight||n.pageWidth)&&(r=n.pageHeight?n.pageHeight:r,i=n.pageWidth?n.pageWidth:i),n.orientation&&("Landscape"===n.orientation&&r>i||"Portrait"===n.orientation&&i>r)){var a=i;i=r,r=a}return o.height=r,o.width=i,o},getMultipleImage:function(e,t,n){var i=[],r=this.createHtmlElement("div",{}),o=this.getPrintCanvasStyle(e,t),a=t.margin,s=a.left,l=a.top,d=a.right,c=a.bottom,h=0,g=o.width+h,u=o.height+0,p=0,m=0;if(t&&!t.fitToPage){r.style.height="auto",r.style.width="auto";var f=e.height,v=e.width,y=0,w=0,b=void 0,S=0,x=0,I=void 0,E=void 0;do{do{S=o.width,x=o.height,p+o.width>=v&&(S=v-p),m+o.height>=f&&(x=f-m),(I=(E=this.createCanvas(void 0+"_multiplePrint",o.width,o.height)).getContext("2d")).fillStyle="white",I.fillRect(0,0,o.width,o.height),I.drawImage(e,h+p,0+m,S,x,s,l,S-d-s,x-c-l),p+o.width>=v&&(p-=p-v),b="PNG"===t.format?E.toDataURL("image/png"):"JPEG"===t.format?E.toDataURL("image/jpeg"):E.toDataURL(),I.restore(),p+=g,n?i.push(b):this.printImage(r,b,y+""+w,g+"px;",u+"px;"),y++}while(p<v);w++,y=h=p=0,m+o.height>=f&&(m-=m-f),m+=u}while(m<f)}else{var B=this.getPrintCanvasStyle(e,t),k=B.width,A=B.height;(I=(E=this.createCanvas(void 0+"_diagram",k,A)).getContext("2d")).drawImage(e,0+s,0+l,e.width-(d+s),e.height-(l+c),0+s,0+l,k-(d+s),A-(l+c));b="PNG"===t.format?E.toDataURL("image/png"):"JPEG"===t.format?E.toDataURL("image/jpeg"):E.toDataURL();I.restore(),n?i.push(b):this.printImage(r,b,0)}return n?i:r},printImage:function(e,t,n,i,o){var a={class:"e-diagram-print-page",style:"width:"+i+"height:"+o},s=this.createHtmlElement("img",a),l=this.createHtmlElement("div",a);r(s,a={id:void 0+"_multiplePrint_img"+n,style:"float:left",src:t}),l.appendChild(s),e.appendChild(l)},print:function(e,t,n,i){return h(this,void 0,void 0,(function(){var r,o,a;return g(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),r={width:n.width,height:n.height},e.mode="Data",[4,this.exportDiagram(e,t,n,i,!0,void 0,void 0,!1)];case 1:return o=s.sent(),e.fitToPage&&(e.pageWidth=r.width,e.pageHeight=r.height),this.printImages(o,e),[2,o];case 2:throw a=s.sent(),console.log("An unexpected error occurred:",a),a;case 3:return[2]}}))}))},onBeforeWindowUnload:function(){d&&!d.closed&&(d.close(),window.removeEventListener("beforeunload",this.onBeforeWindowUnload))},onBeforePrintWindowUnload:function(){d&&(d.removeEventListener("beforeunload",this.onBeforePrintWindowUnload),window.removeEventListener("beforeunload",this.onBeforeWindowUnload))},printImages:function(e,t){var n=this,i={id:void 0+"_printImage",src:e};t.margin={top:0,bottom:0,right:0,left:0};var r=this.createHtmlElement("img",i);r.onload=function(){var e=n.getMultipleImage(r,t),i=window.open("");d=i,null!=i&&e instanceof HTMLElement&&(i.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),i.addEventListener("load",(function(e){setTimeout((function(){i.window.print()}),3e3)})),i.document.write("<center>"+e.innerHTML+"</center>"),i.document.close(),d.addEventListener("beforeunload",n.onBeforePrintWindowUnload),window.addEventListener("beforeunload",n.onBeforeWindowUnload))}},exportImages:function(e,t){var n=this,i=t&&t.region?t.region:"Content",o=t.margin||{};o={top:isNaN(o.top)?0:o.top,bottom:isNaN(o.bottom)?0:o.bottom,left:isNaN(o.left)?0:o.left,right:isNaN(o.right)?0:o.right};var a=this.getDiagramBounds(i,{});t.clipBounds&&(a.x=isNaN(t.clipBounds.x)?a.x:t.clipBounds.x,a.y=isNaN(t.clipBounds.y)?a.y:t.clipBounds.y,a.width=t.clipBounds.width||a.width,a.height=t.clipBounds.height||a.height);var s=document.createElement("img");r(s,{src:e}),s.onload=function(){var i=n.createCanvas(n.Diagram.id+"innerImage",a.width+(o.left+o.right),a.height+(o.top+o.bottom)),r=i.getContext("2d");if(r.fillStyle=n.diagram.pageSettings.background.color,r.fillRect(0,0,a.width+(o.left+o.right),a.height+(o.top+o.bottom)),r.drawImage(s,0,0,a.width,a.height,o.left,o.top,a.width,a.height),e=i.toDataURL(),t.printOptions)n.printImages(e,t);else{r.restore();var l=t.fileName||"diagram";n.canvasMultiplePage(t,i,o,e,l)}}},overviewModelBounds:function(){var e,t,n=document.getElementById("overview"),i=n.clientWidth,r=n.clientHeight,o=n.getBoundingClientRect(),a=window.screenX<0?-1*window.screenX:window.screenX,s=window.screenY<0?-1*window.screenY:window.screenY;if(0===i){var l=Math.floor(window.innerWidth-a-Math.floor(o.left));i=l>0?l:Math.floor(window.innerWidth)}if(0===r){var d=Math.floor(window.innerHeight-s-Math.floor(o.top));r=d>0?d:Math.floor(window.innerHeight)}return i>0&&(e=r),r>0&&(t=i),{height:e,width:t}},invokeOverviewEvents:function(e){var t=this,n=document.getElementById("overview");n&&(n.addEventListener("mousedown",(function(n){t.overviewMouseEventArgs(n,e)})),n.addEventListener("mouseup",(function(n){t.overviewMouseEventArgs(n,e)})),n.addEventListener("mousemove",(function(n){t.overviewMouseEventArgs(n,e)})),n.addEventListener("mouseleave",(function(n){t.overviewMouseEventArgs(n,e)})),n.addEventListener("touchstart",(function(n){t.overviewMouseEventArgs(n,e)})),n.addEventListener("touchmove",(function(n){t.overviewMouseEventArgs(n,e)})),n.addEventListener("touchend",(function(n){t.overviewMouseEventArgs(n,e)})))},diagramOverview:function(e,t,n,i,r){try{var o=document.getElementById(e+"_diagramLayer_svg").cloneNode(!0),a=document.createElementNS("http://www.w3.org/2000/svg","svg");i.scale=1;var s=document.getElementById(e).clientHeight,l=document.getElementById(e).clientWidth,d=Math.max(Number(t.width),l),c=Math.max(Number(t.height),s).toString(),h=d.toString();n>=1&&(o.setAttribute("style","pointer-events: all;height:"+c+"px;width:"+h+"px;"),o.children[0].setAttribute("transform","translate("+-t.x+","+-t.y+"),scale("+i.scale+")")),a.setAttribute("height",c),a.setAttribute("width",h),a.appendChild(o);var g=window.URL.createObjectURL(new Blob([(new window.XMLSerializer).serializeToString(a)],{type:"image/svg+xml"})),u=document.getElementById("overview_diagramlayer"),p=u.getContext("2d"),m=new Image;m.onload=function(){p.fillStyle="transparent",p.setTransform(1,0,0,1,0,0),p.clearRect(0,0,u.width,u.height),p.setTransform(r,0,0,r,0,0),p.drawImage(m,0,0),window.URL.revokeObjectURL(g)},m.src=g;for(var f=document.getElementById(e+"_htmlLayer_div").cloneNode(!0),v=document.getElementById("overview_htmllayer_div");v.firstChild;)v.firstChild.remove();for(var y=0;y<f.children.length;y++){var w=f.children[parseInt(y.toString(),10)].cloneNode(!0);v.appendChild(w)}}catch(e){throw console.log("An unexpected error occurred:",e),e}},overviewMouseEventArgs:function(e,t){try{var n=document.getElementById("overview"),i={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode,button:e.button,targetId:e.target.id,overviewGetBoundingClientRect:n.getBoundingClientRect(),targetCssClass:e.target.classList.value,touches:this.getTouches(e),offsetLeft:n.offsetLeft,offsetTop:n.offsetTop};t.invokeMethodAsync("InvokeOverviewEvents",i)}catch(e){throw console.log("An unexpected error occurred:",e),e}}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js?v=28.1.undefined`).then(()=>{sfBlazor.loadDependencies('sfdiagramcomponent');})})();